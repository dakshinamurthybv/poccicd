name: poccicd
run-name: Setting up the poc database
on: [push]
jobs:
  test-output:
    runs-on: ubuntu-latest
    steps:
    - name: Test Output
      run: echo "Here is a test"
  connect-remote:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Show databases
      run: sqlcmd -U sa -P Sa1234567890 -S ES-LAPTOP-481\SQL2019 -d MASTER -w 200  -b -Q "if exists (Select * from master.dbo.sysdatabases where name = 'SarasDB_TA_blankdb') drop database SarasDB_TA_blankdb"

    - name: Run a sample SQL on remote
      run: sqlcmd -h ${{ secrets.DB_HOSTNAME }} --port 1433 -u${{ secrets.DB_USER }} -p${{ secrets.DB_PASSWORD }} -e "source createdb.sql";